!function(a){var b={section_name:[],isScrolling:!0,section_num:1};b.fadeInByOrder=function(b,c,d){var e=1,f=a(b+" .fade").length+1,g=c||100,h=d||function(){};!function(){f>e&&(a(b+" .fade"+e).addClass("fade-in"),e++,setTimeout(arguments.callee,g),e===f&&h())}()},b.throttle=function(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},b.reCal=function(){!function(){if(!a("body").hasClass("finish-loading")){var b=(a(window).height()-175)/2,c=(a(window).width()-a("loading").width())/2-60;a(".loading").css({top:b,left:c,right:"auto",bottom:"auto"})}}(),a(".section-wrap").each(function(c){b.section_name[c]=a(this).attr("class").substr(a(this).attr("class").indexOf("section-wrap ")+13),a(this).find(".section").height(a(window).height())}),a(".section-content").each(function(){a(this).css({marginTop:(a(window).height()-40-a(this).height())/2})})},b.fixedbg=function(){var c,b=1e3/667;!function(){c=a(window).width()/a(window).height(),b>c?a(".home-bg img").css({height:a(window).height()+"px",width:a(window).height()*b+"px","margin-left":"-"+(a(window).height()*b-a(window).width())/2+"px"}):a(".home-bg img").css({height:a(window).width()/b+"px",width:a(window).width()+"px","margin-left":0})}()},b.shrinkHeader=function(b){b?a(".section-header").addClass("shrink"):a(".section-header").removeClass("shrink")},b.fire_nav=function(b){switch(a(".nav .fade").removeClass("hover"),b){case 2:a(".nav .fade1").addClass("hover");break;case 3:a(".nav .fade4").addClass("hover");break;case 4:a(".nav .fade2").addClass("hover");break;case 5:a(".nav .fade3").addClass("hover")}},b.scrollHandle=function(c){if(!b.isScrolling){b.isScrolling=!0;var d=c?b.targetScrollTop(++b.section_num):b.targetScrollTop(--b.section_num);c?b.section_num>1&&b.shrinkHeader(!0):1===b.section_num&&b.shrinkHeader(!1),a("html,body").animate({scrollTop:d},600,function(){b.isScrolling=!1}),b.fire_nav(b.section_num)}},b.targetScrollTop=function(c){return c>b.section_name.length&&(b.section_num=b.section_name.length),1>c&&(b.section_num=1),a(window).height()*(b.section_num-1)},b.forRetina=function(){function c(){switch(parseInt(a(".state-indicator").css("z-index"),10)){case 1:return!1;case 2:return!0}}a("body").append('<div class="state-indicator"></div>'),c()&&b.changeDBImg(),a(".state-indicator").remove()},b.changeDBImg=function(){function b(a,b){return a.substring(0,a.indexOf("."+b))+"@2x."+b}a(".my-photo").attr("src",function(){return b(a(this).attr("src"),"jpg")})},b.handleTouchEvent=function(a){if(1==a.touches.length){var c,d;switch(a.type){case"touchstart":c=a.touches[0].clientY;break;case"touchmove":d=a.changedTouches[0].clientY}b.scrollHandle(c>d?!0:!1)}a.preventDefault()},a(document).ready(function(){a('a[href="#"]').click(function(a){return a.preventDefault(),!1}),b.reCal(),b.fixedbg(),b.forRetina(),a(".nav a").click(function(c){var d=a(this).attr("href");switch(d){case"#top":d=1;break;case"#about":d=2;break;case"#works":d=3;break;case"#skill":d=4;break;case"#contact":d=5}return b.section_num=d,1==d?(b.shrinkHeader(!1),a(".nav .fade").removeClass("hover")):(b.fire_nav(d),b.shrinkHeader(!0)),a("body,html").animate({scrollTop:b.targetScrollTop(d)},600,function(){}),c.preventDefault(),!1}),a(".scroll-tip").click(function(){b.isScrolling||(b.isScrolling=!0,a("html,body").animate({scrollTop:b.targetScrollTop(++b.section_num)},400,function(){b.isScrolling=!1}),b.section_num>1&&b.shrinkHeader(!0))})}),window.onresize=b.throttle(function(){b.reCal(),b.fixedbg()},50),a(window).load(function(){b.fixedbg(),b.reCal(),a("html,body").animate({scrollTop:0},100),b.isScrolling=!1,function(){a("body").addClass("finish-loading"),a(".finish-loading .loading").animate({top:"20px"},600,function(){a(".back-home").css("opacity",1),a(".loading").remove()}),setTimeout(function(){a("body").removeClass("loading-process")},600),b.fadeInByOrder(".nav",100,function(){b.fadeInByOrder(".section-fristpage",300)})}()}),window.onscroll=b.throttle(function(){a("body").removeClass("finish-loading");var c;switch(b.section_num){case 1:c=".section-fristpage",a("body").addClass("finish-loading");break;case 2:c=".about-content";break;case 3:c=".works-list";break;case 4:c=".skill-content";break;case 5:c=".contact-content"}b.fadeInByOrder(c,200)},50),a(document).on("mousewheel DOMMouseScroll",function(a){var c=a.originalEvent,d=c.wheelDelta||-c.detail,e=0>d?!0:!1;e?b.scrollHandle(!0):b.scrollHandle(!1),a.preventDefault()})}(jQuery);